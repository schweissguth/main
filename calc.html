
<!DOCTYPE html>
<html>
<head>
  <script src="https://stupid-fast.com/server.js?jhjhh"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1">

</head>

<body>
  <table id="t2" cellpadding="3" border></table>
  
  <hr>

<button onclick="submitResults()">Submit</button>

<script>

getRunningOrder().then(function (groups) {
  console.log(groups)

  groups.forEach(function (group, gid) {
    group.drivers.forEach(function (driver) {
      if (driver.playerid) {
        let tr = t2.insertRow()
        tr.insertCell().innerText = driver.raceid
        tr.insertCell().innerText = gid
        tr.insertCell().innerText = driver.id
        tr.insertCell().innerText = driver.pos
        tr.insertCell().innerText = driver.score
        tr.insertCell().innerText = driver.playerid
        tr.insertCell().setAttribute("contenteditable", true)
        tr.insertCell().innerText = driver.playername
        tr.insertCell().innerText = driver.name
      }
    })
  })
})

function submitResults() {
  let ARR = []
  for (let r of document.querySelector("TABLE").rows) {
    let arr = []
    for (let c of r.cells) {
      arr.push(c.innerText)
    }
    ARR.push(arr)
  }
  console.log(ARR)
  if (confirm("Submit?")) {
    fetch("https://script.google.com/macros/s/AKfycbyEGYd3C0Zgd-mHbBrjDrdMUSsYvj_7oky1yIuffDrRk8rURlR-gV_IteIJHzznntfO/exec?SCORES", {
      method: "post",
      body: JSON.stringify(ARR)
    })
  }
}

</script>

</body>


</html>
